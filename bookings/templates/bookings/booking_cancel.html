{% extends 'base.html' %}
{% load static %}

{% block title %}Cancel Booking - Daimaescape{% endblock %}

{% block content %}

<!-- Page Header Start -->
<div class="container-fluid page-header mb-5 p-0" style="background-image: url({% static 'img/carousel-01.jpg' %});">
  <div class="container-fluid page-header-inner py-5">
    <div class="container text-center pb-5">
      <h1 class="display-3 text-white mb-3 animated slideInDown">Cancel Booking</h1>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb justify-content-center text-uppercase">
          <li class="breadcrumb-item"><a href="{% url 'core:home' %}">Home</a></li>
          <li class="breadcrumb-item"><a href="{% url 'booking:booking' %}">Booking</a></li>
          <li class="breadcrumb-item"><a href="{% url 'booking:booking_detail' booking.booking_reference %}">Details</a>
          </li>
          <li class="breadcrumb-item text-white active" aria-current="page">Cancel</li>
        </ol>
      </nav>
    </div>
  </div>
</div>
<!-- Page Header End -->

<!-- Cancel Confirmation Start -->
<div class="container-xxl py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="bg-light rounded p-5">
          <div class="text-center mb-4">
            <i class="fa fa-exclamation-triangle text-warning" style="font-size: 4rem;"></i>
            <h2 class="mt-3">Cancel Booking</h2>
            <p class="lead">Are you sure you want to cancel this booking?</p>
          </div>

          <!-- Booking Summary -->
          <div class="bg-white rounded p-4 mb-4">
            <h5 class="mb-3">Booking Summary</h5>
            <div class="row">
              <div class="col-sm-6 mb-2">
                <strong>Reference:</strong> {{ booking.booking_reference }}
              </div>
              <div class="col-sm-6 mb-2">
                <strong>Guest:</strong> {{ booking.guest_name }}
              </div>
              <div class="col-sm-6 mb-2">
                <strong>Room:</strong> {{ booking.room.name }}
              </div>
              <div class="col-sm-6 mb-2">
                <strong>Check-in:</strong> {{ booking.check_in_date|date:"M d, Y" }}
              </div>
              <div class="col-sm-6 mb-2">
                <strong>Check-out:</strong> {{ booking.check_out_date|date:"M d, Y" }}
              </div>
              <div class="col-sm-6 mb-2">
                <strong>Total Amount:</strong> ${{ booking.total_amount }}
              </div>
              <div class="col-12">
                <strong>Status:</strong>
                <span class="badge bg-warning">{{ booking.get_status_display }}</span>
              </div>
            </div>
          </div>

          <!-- Cancellation Policy -->
          <div class="alert alert-info mb-4">
            <i class="fa fa-info-circle me-2"></i>
            <strong>Cancellation Policy:</strong> Cancellations made 48 hours before check-in are free. Late
            cancellations may incur a fee of one night's stay.
          </div>

          <!-- Cancellation Form -->
          <form method="post">
            {% csrf_token %}

            <div class="mb-4">
              <label for="cancellation_reason" class="form-label">Reason for cancellation (optional)</label>
              <textarea name="cancellation_reason" id="cancellation_reason" class="form-control" rows="3"
                placeholder="Please let us know why you're cancelling..."></textarea>
            </div>

            <div class="d-flex gap-3">
              <button type="submit" class="btn btn-danger flex-grow-1 py-3"
                onclick="return confirm('This action cannot be undone. Are you absolutely sure?');">
                <i class="fa fa-times-circle me-2"></i>Yes, Cancel Booking
              </button>
              <a href="{% url 'booking:booking_detail' booking.booking_reference %}"
                class="btn btn-outline-secondary flex-grow-1 py-3">
                <i class="fa fa-arrow-left me-2"></i>No, Go Back
              </a>
            </div>
          </form>
        </div>

        <!-- Need Help -->
        <div class="bg-primary text-white rounded p-4 mt-4 text-center">
          <h5 class="text-white mb-3">Need Assistance?</h5>
          <p class="mb-3">If you're having trouble or have questions, contact our support team.</p>
          <div class="d-flex justify-content-center gap-4">
            <div>
              <i class="fa fa-phone-alt me-2"></i>
              <span>+255 754 374 842</span>
            </div>
            <div>
              <i class="fa fa-envelope me-2"></i>
              <span>support@daimaescape.com</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Cancel Confirmation End -->

{% endblock %}
